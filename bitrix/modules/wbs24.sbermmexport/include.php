<? namespace Wbs24;$GLOBALS['____2111314429']= array(base64_decode('ZG'.'Vm'.'aW5l'),base64_decode(''.'c3Ry'.'cmV2'),base64_decode('c3RydG91'.'c'.'H'.'Blcg='.'='),base64_decode('c3By'.'a'.'W5'.'0Zg=='),base64_decode('c'.'3B'.'yaW5'.'0Zg=='),base64_decode('c'.'3Vic'.'3'.'Ry'),base64_decode('c3RycmV2'),base64_decode('Ym'.'Fz'.'ZTY0X2RlY29kZQ='.'='),base64_decode(''.'c3Vic'.'3Ry'),base64_decode(''.'c'.'3RybG'.'Vu'),base64_decode('c3Ry'.'bGVu'),base64_decode(''.'Y2hy'),base64_decode('b3J'.'k'),base64_decode('b3J'.'k'),base64_decode('bWt0'.'aW1l'),base64_decode('aW'.'50dmFs'),base64_decode('aW50dmFs'),base64_decode('aW50dm'.'Fs'),base64_decode('a3'.'NvcnQ'.'='),base64_decode(''.'c3Vic'.'3'.'Ry'),base64_decode('aW1wbG9kZQ=='),base64_decode('ZGV'.'m'.'aW5'.'lZA=='),base64_decode('YmFzZTY0X2'.'Rl'.'Y'.'29k'.'Z'.'Q=='),base64_decode('Y29uc3'.'RhbnQ='),base64_decode('c3RycmV2'),base64_decode('c3Bya'.'W50Zg=='),base64_decode(''.'c3Ry'.'bG'.'Vu'),base64_decode(''.'c3RybGVu'),base64_decode('Y2'.'hy'),base64_decode('b3J'.'k'),base64_decode('b'.'3J'.'k'),base64_decode('bWt0aW1l'),base64_decode('aW5'.'0dm'.'Fs'),base64_decode(''.'a'.'W50dmFs'),base64_decode('aW'.'50dmFs'),base64_decode('c3Vic3Ry'),base64_decode('c'.'3Vic3'.'Ry'),base64_decode('dGltZQ=='),base64_decode(''.'bW'.'t0aW1l'),base64_decode('b'.'Wt0aW1l'),base64_decode('ZGF0ZQ=='),base64_decode('ZG'.'F'.'0ZQ=='),base64_decode('ZGVm'.'aW5l'),base64_decode('ZGVmaW5l'),base64_decode('aW5f'.'YXJ'.'yYXk='),base64_decode('aW5fYXJ'.'yYX'.'k='),base64_decode(''.'aW5'.'f'.'Y'.'XJ'.'yYXk='),base64_decode('aW5'.'f'.'YXJy'.'Y'.'Xk='),base64_decode('a'.'HRtbHNw'.'ZWNpY'.'Wxj'.'aGFyc'.'w'.'=='),base64_decode('aXNfbnV'.'t'.'ZX'.'J'.'pYw=='),base64_decode('c3RycG9z'),base64_decode('aXNf'.'Y'.'XJy'.'YXk='),base64_decode('Y3Vyc'.'mVu'.'d'.'A=='),base64_decode('aXNfbnVtZXJp'.'Yw=='),base64_decode('aW50dmFs'),base64_decode('cHJlZ1'.'9tYXRjaF'.'9hb'.'Gw'.'='),base64_decode('aX'.'Nf'.'YXJyYXk='),base64_decode('c3R'.'yX3Jlc'.'GxhY2U='),base64_decode('Zm'.'9wZW4='),base64_decode('Zm'.'9wZ'.'W4='),base64_decode('ZmVvZg='.'='),base64_decode(''.'Zmd'.'l'.'dHM='),base64_decode('Z'.'n'.'dyaX'.'Rl'),base64_decode('Zm'.'Ns'.'b3Nl'),base64_decode('ZmNsb3Nl'),base64_decode('Zm9w'.'Z'.'W4='),base64_decode('Zn'.'d'.'y'.'aXR'.'l'),base64_decode('ZmNs'.'b3Nl'),base64_decode('Z'.'mlsZ'.'V9n'.'ZXRf'.'Y29ud'.'GVud'.'HM='),base64_decode('Z'.'Gly'.'bmFt'.'Z'.'Q=='),base64_decode(''.'c2N'.'hbmR'.'pcg=='),base64_decode('ZXhwbG9k'.'ZQ=='),base64_decode('c3'.'RycG9z'),base64_decode('ZXhw'.'b'.'G'.'9kZQ=='),base64_decode(''.'c3R'.'ycG9'.'z'),base64_decode('ZXh'.'wbG'.'9'.'kZ'.'Q'.'=='),base64_decode('c3RyX3JlcGxh'.'Y2U='),base64_decode('a'.'W50dmFs'),base64_decode('dW5saW5r'),base64_decode('ZGVidWdfYmFja'.'3RyYWNl'),base64_decode('c3'.'RycG9z'),base64_decode(''.'c'.'3Ryc'.'G9z'),base64_decode(''.'ZGV'.'maW5l'.'ZA=='),base64_decode('c'.'3RybGVu'));if(!function_exists(__NAMESPACE__.'\\___1949743428')){function ___1949743428($_1941837155){static $_301851837= false; if($_301851837 == false) $_301851837=array('ZX'.'hwaXJlX21lc3Nf'.'Y3Vz'.'dG9tM'.'g'.'==','d2JzMjRfc2J'.'lcm'.'1tZ'.'Xhwb3J0Xw='.'=','b21lZA==','WQ'.'==','ZH'.'JtX3N0ZXJ'.'nb'.'2t'.'j','JTAxM'.'HMK','M'.'jRf'.'c2Jl','d2JzMjQu'.'c2Jlcm1'.'tZXh'.'wb3J0','JXMlc'.'w==',''.'fmJz','ZXRhZF9wbw==','YW'.'RtaW'.'4=',''.'bW'.'9kdWx'.'l'.'cw==','d'.'X'.'Nl'.'c'.'l9k'.'YXRlX2'.'Jz'.'bS5'.'wa'.'HA=','d2J'.'zMj'.'Quc2Jlcm1tZX'.'hw'.'b3J0','Yml0c'.'ml'.'4','Uk'.'gyN'.'F9zYmU=','MGMwMjB'.'kZjA5O'.'ThoeXRvc'.'w'.'==','','N'.'jEy',''.'M'.'mQwMDNj'.'Y'.'WI0YT'.'EwMDJmY'.'jc5','NT'.'gyYzNjZ'.'g==',''.'aHR0cDo'.'vL2'.'JpdHJpe'.'HN'.'vZnQ'.'uY29t'.'L2JpdHJpeC9icy5w'.'aHA=','d'.'2Jz','c'.'m1tZX'.'hwb3J0X09MR'.'F'.'NJV'.'E'.'VFW'.'FBJ'.'UkVE'.'QVRF'.'Uw==','RE9D'.'V'.'U1F'.'TlRfUk9PVA==','L'.'w==',''.'L'.'w='.'=','d2J'.'zMjRfc2Jlcm1tZ'.'Xhw'.'b3J'.'0X'.'1RFT'.'V'.'BPUkF'.'SWV9DQU'.'NIR'.'Q==','d2'.'JzMjR'.'fc'.'2Jlc'.'m1'.'tZ'.'Xhwb'.'3J0X1'.'RFTVBPUkFSWV9'.'D'.'QUNIR'.'Q==','','ZjhjY2'.'M=',''.'J'.'X'.'Mlcw==','MWFkZmRhYzUxYzQ2Nj'.'dkNjcyNT'.'g=','d2Jz','cm1'.'t'.'ZX'.'hwb'.'3J0X1NJVEV'.'F'.'WF'.'BJ'.'UkVE'.'QVRFTUF'.'QRVI=','b'.'Q==','Z'.'A==','W'.'Q='.'=','U'.'2'.'l'.'0ZUV4cGlyZU'.'RhdGVfd'.'2JzM'.'j'.'R'.'f'.'c2Jlcm'.'1t'.'ZX'.'hw'.'b3'.'J0','YXV0b2'.'xvY'.'WQucGhw','c2V0T2Z'.'mZXJJ'.'ZA==','S'.'UQ=','aWJsb2'.'N'.'rSW'.'Q'.'=','SUQ=','WE1MX0lE',''.'SUJMT0NLX0lE','SUQ=',''.'WE1MX'.'0lE','RVhURVJOQUx'.'f'.'SU'.'Q=','SUJMT'.'0N'.'LX0'.'lE','UFJPUEV'.'SVElFUw'.'='.'=','flZ'.'BT'.'FVF','SUJM'.'T0NLX0lE','Q0'.'9E'.'RQ==','SUQ=','WQ='.'=','Tg==','UFJPRFV'.'D'.'VF9OQ'.'U1'.'F','T0'.'ZGRVJfT'.'kFN'.'RQ==','UFJPRF'.'VDVF'.'9'.'QQUNLQUdFX1JBVElPX'.'1BST1BFU'.'lRZ',''.'T0ZGRVJf'.'UEFD'.'S'.'0F'.'HRV'.'9SQVR'.'JT'.'19QUk9Q'.'RV'.'JUWQ==','T'.'0'.'ZGRVJf'.'VVJM','UFJP'.'RFVDVF9'.'VUkw'.'=','UFJPUE'.'V'.'S'.'VE'.'lFUw==',''.'VkFMVUU=',''.'T0ZGRVJfT'.'kF'.'NRQ'.'==','UFJPR'.'FVDVF9OQU1F','Tk'.'FNRQ==',''.'UF'.'JPUEV'.'SVElFUw='.'=','TkFNRQ==',''.'TkFNRQ==','T'.'kFN'.'RQ==','UF'.'JPU'.'EVSVFlf','','UF'.'JPU'.'EVSVFlfV'.'FlQRQ==','RQ'.'==','PUlE','SUQ=','TkFNRQ'.'==','Tk'.'FNRQ'.'==','','ZXh0ZW5kUHJp'.'Y2'.'VCeU'.'Zvcm11bGE=','cHJvcGVydGll'.'c0J'.'hc2Vk'.'V2FyZWh'.'vdXNl','Jw==','Ig'.'='.'=','',''.'Y'.'WI=',''.'RE'.'9'.'DVU'.'1F'.'Tl'.'RfUk9PVA==','R'.'E'.'9DVU1FTlRfUk9PV'.'A='.'=','Cg==','LnR4dA==','d'.'2I=','Lw==','L'.'nBo'.'cF9p'.'bXBvcnRf','Xw'.'==','LnBo'.'cA==','','Zm'.'lsZQ==','',''.'ZX'.'hwb3J'.'0X3NldH'.'Vw'.'LnBocA==','WQ='.'=',''.'L'.'2JpdHJpeC9qc'.'y9'.'3YnMyNC'.'5'.'zYmVyb'.'W1le'.'HBvcnQv'.'a'.'W'.'5pdC5q'.'cw==','UkVRVU'.'V'.'TVF9VUkk'.'=','L2JpdHJ'.'pe'.'C'.'9'.'hZ'.'G1'.'pb'.'i9jYXRfZXhw'.'b3J0X3'.'NldHVwLnBocA==','WQ==','d2JzMjRfc2Jlcm1tZXhwb3J0X'.'09MRFNJV'.'EVFWFB'.'JUk'.'VEQ'.'VRF','ZXh'.'waX'.'J'.'lX21l'.'c3NfY3VzdG9tMg==');return base64_decode($_301851837[$_1941837155]);}};$_1398727851= GetMessage(___1949743428(0));$_601516089=(212*2-424);@$GLOBALS['____2111314429'][0](___1949743428(1).$GLOBALS['____2111314429'][1]($GLOBALS['____2111314429'][2](___1949743428(2))), ___1949743428(3));$_1413184786= round(0+0.2+0.2+0.2+0.2+0.2); $_1461196573= ___1949743428(4); unset($_1452739532); $_469412956= $GLOBALS['____2111314429'][3](___1949743428(5), ___1949743428(6)); $_1452739532= \COption::GetOptionString(___1949743428(7), $GLOBALS['____2111314429'][4](___1949743428(8),___1949743428(9),$GLOBALS['____2111314429'][5]($_1461196573, round(0+2), round(0+1+1+1+1))).$GLOBALS['____2111314429'][6](___1949743428(10))); $_2141395238= array(round(0+5.6666666666667+5.6666666666667+5.6666666666667) => ___1949743428(11), round(0+7) => ___1949743428(12), round(0+11+11) => ___1949743428(13), round(0+2.4+2.4+2.4+2.4+2.4) => ___1949743428(14), round(0+1+1+1) => ___1949743428(15)); $_816832449= ___1949743428(16); while($_1452739532){ $_1955958498= ___1949743428(17); $_1733574971= $GLOBALS['____2111314429'][7]($_1452739532); $_1550619665= ___1949743428(18); $_1955958498= $GLOBALS['____2111314429'][8](___1949743428(19).$_1955958498,(138*2-276),-round(0+1.25+1.25+1.25+1.25)).___1949743428(20); $_914147425= $GLOBALS['____2111314429'][9]($_1955958498); $_521752326=(1116/2-558); for($_1909644600=(1400/2-700); $_1909644600<$GLOBALS['____2111314429'][10]($_1733574971); $_1909644600++){ $_1550619665 .= $GLOBALS['____2111314429'][11]($GLOBALS['____2111314429'][12]($_1733574971[$_1909644600])^ $GLOBALS['____2111314429'][13]($_1955958498[$_521752326])); if($_521752326==$_914147425-round(0+1)) $_521752326=(1264/2-632); else $_521752326= $_521752326+ round(0+0.2+0.2+0.2+0.2+0.2);} $_1413184786= $GLOBALS['____2111314429'][14]((176*2-352),(1460/2-730),(846-2*423), $GLOBALS['____2111314429'][15]($_1550619665[round(0+6)].$_1550619665[round(0+1+1+1)]), $GLOBALS['____2111314429'][16]($_1550619665[round(0+0.2+0.2+0.2+0.2+0.2)].$_1550619665[round(0+14)]), $GLOBALS['____2111314429'][17]($_1550619665[round(0+3.3333333333333+3.3333333333333+3.3333333333333)].$_1550619665[round(0+4.5+4.5+4.5+4.5)].$_1550619665[round(0+3.5+3.5)].$_1550619665[round(0+4+4+4)])); unset($_1955958498); break;} $_1782930760= ___1949743428(21); $GLOBALS['____2111314429'][18]($_2141395238); $_1733462838= ___1949743428(22); $_816832449= ___1949743428(23).$GLOBALS['____2111314429'][19]($_816832449.___1949743428(24), round(0+0.4+0.4+0.4+0.4+0.4),-round(0+0.2+0.2+0.2+0.2+0.2));@include($_SERVER[___1949743428(25)].___1949743428(26).$GLOBALS['____2111314429'][20](___1949743428(27), $_2141395238)); $_937359642= round(0+1+1); while($GLOBALS['____2111314429'][21](___1949743428(28))){ $_609634935= $GLOBALS['____2111314429'][22]($GLOBALS['____2111314429'][23](___1949743428(29))); $_1319203168= ___1949743428(30); $_1782930760= $GLOBALS['____2111314429'][24](___1949743428(31)).$GLOBALS['____2111314429'][25](___1949743428(32),$_1782930760,___1949743428(33)); $_718787928= $GLOBALS['____2111314429'][26]($_1782930760); $_521752326=(190*2-380); for($_1909644600=(1028/2-514); $_1909644600<$GLOBALS['____2111314429'][27]($_609634935); $_1909644600++){ $_1319203168 .= $GLOBALS['____2111314429'][28]($GLOBALS['____2111314429'][29]($_609634935[$_1909644600])^ $GLOBALS['____2111314429'][30]($_1782930760[$_521752326])); if($_521752326==$_718787928-round(0+0.25+0.25+0.25+0.25)) $_521752326=(966-2*483); else $_521752326= $_521752326+ round(0+0.5+0.5);} $_937359642= $GLOBALS['____2111314429'][31]((976-2*488),(928-2*464),(782-2*391), $GLOBALS['____2111314429'][32]($_1319203168[round(0+6)].$_1319203168[round(0+4+4+4+4)]), $GLOBALS['____2111314429'][33]($_1319203168[round(0+3+3+3)].$_1319203168[round(0+2)]), $GLOBALS['____2111314429'][34]($_1319203168[round(0+2.4+2.4+2.4+2.4+2.4)].$_1319203168[round(0+1.4+1.4+1.4+1.4+1.4)].$_1319203168[round(0+4.6666666666667+4.6666666666667+4.6666666666667)].$_1319203168[round(0+0.75+0.75+0.75+0.75)])); unset($_1782930760); break;} $_469412956= ___1949743428(34).$GLOBALS['____2111314429'][35]($GLOBALS['____2111314429'][36]($_469412956, round(0+0.6+0.6+0.6+0.6+0.6),-round(0+0.25+0.25+0.25+0.25)).___1949743428(35), round(0+0.25+0.25+0.25+0.25),-round(0+1.25+1.25+1.25+1.25));for($_1909644600=(151*2-302),$_1437191533=($GLOBALS['____2111314429'][37]()< $GLOBALS['____2111314429'][38]((184*2-368),min(128,0,42.666666666667),min(68,0,22.666666666667),round(0+2.5+2.5),round(0+0.33333333333333+0.33333333333333+0.33333333333333),round(0+2010)) || $_1413184786 <= round(0+2.5+2.5+2.5+2.5)),$_382399998=($_1413184786< $GLOBALS['____2111314429'][39]((1308/2-654),(1396/2-698),min(44,0,14.666666666667),Date(___1949743428(36)),$GLOBALS['____2111314429'][40](___1949743428(37))-$_601516089,$GLOBALS['____2111314429'][41](___1949743428(38)))); $_1909644600< round(0+10),$_1437191533 || $_382399998 || $_1413184786 != $_937359642; $_1909644600++)return false;$GLOBALS['____2111314429'][42]($_816832449, $_1413184786); $GLOBALS['____2111314429'][43]($_469412956, $_937359642); $GLOBALS[___1949743428(39)]= wbs24_sbermmexport_OLDSITEEXPIREDATE; require_once(___1949743428(40)); use Bitrix\Iblock; use Bitrix\Main\Loader; use Wbs24\Sbermmexport\{ Admin, DetailSettings, CommonPrice, ExtendPrice, ExtendPriceByFormula, CommonWarehouse, ExtendWarehouse, PropertiesBasedWarehouse, Filter, Limit, Tax, Shipment, Wrappers, Legasy, StringTemplate, BasicAuth}; class Sbermmexport extends Legasy{ public const MAX_MANUAL_ELEMENTS= 1000; protected const MANUAL_CALL_FLAG= 'WBS24_SBERMMEXPORT_MANUAL_CALL'; protected $_678866187; protected $_2060328424; protected $_1288776043; protected $_1449452972; protected $_1196213499; protected $_2045151772; protected $_1968596529; protected $_279382285= false; protected $_1503750856=[]; public function __construct($_1186439726=[]){ $this->_1968596529= $_1186439726['StringTemplate'] ?? new StringTemplate();} public function loadPropertiesForOfferIds($_141685079, $_2048791064){ $_1972427181= $_141685079['setId'] ?? 'ID'; $_433952845= $_141685079[___1949743428(41)] ?? ___1949743428(42); $_871753944= $_141685079[___1949743428(43)] ?? false; $_1320947463=[ ___1949743428(44), ___1949743428(45),]; if(!$GLOBALS['____2111314429'][44]($_1972427181, $_1320947463)){ $_1005935886= $this->getPropertyIdByCode($_1972427181, $_871753944); if($_1005935886 &&!$GLOBALS['____2111314429'][45]($_1005935886, $_2048791064)){ $_2048791064[]= $_1005935886;}} if(!$GLOBALS['____2111314429'][46]($_433952845, $_1320947463)){ $_1873058395= $this->getOffersIblockId($_871753944); $_1005935886= $this->getPropertyIdByCode($_433952845, $_1873058395); if($_1005935886 &&!$GLOBALS['____2111314429'][47]($_1005935886, $_2048791064)){ $_2048791064[]= $_1005935886;}} return $_2048791064;} public function getOffersIblockId($_871753944){ $_141685079= \CCatalogSku::GetInfoByProductIBlock($_871753944); return $_141685079[___1949743428(46)] ?? false;} public function getElementId($_1531805407, $_1040228528= 'ID'){ $_1483875850= false; switch($_1040228528){ case ___1949743428(47): $_1483875850= $_1531805407[$_1040228528] ?? false; break; case ___1949743428(48): $_1040228528= ___1949743428(49); $_1483875850= $_1531805407[$_1040228528] ?? false; break; default: $_1005935886= $this->getPropertyIdByCode($_1040228528, $_1531805407[___1949743428(50)]); $_1483875850= $_1531805407[___1949743428(51)][$_1005935886][___1949743428(52)] ?? false; if($_1483875850) $_1483875850= $GLOBALS['____2111314429'][48]($_1483875850);} return $_1483875850;} protected function getPropertyIdByCode($_1040228528, $_871753944){ $_2048791064= $this->getPropertiesByIblockId($_871753944); $_1005935886= $_2048791064[$_1040228528] ?? false; return $_1005935886;} protected function getPropertiesByIblockId($_871753944){ $_2048791064= $this->_1503750856[$_871753944]?:[]; if($_2048791064) return $_2048791064; $_1291362541= \CIBlockProperty::GetList([],[ ___1949743428(53) => $_871753944,]); while($_168369407= $_1291362541->Fetch()){ $_2041128993= $_168369407[___1949743428(54)]; $_1005935886= $_168369407[___1949743428(55)]; $_2048791064[$_2041128993]= $_1005935886;} $this->_1503750856[$_871753944]= $_2048791064; return $_2048791064;} public function getParams($_1493944326){ $_1353039630=[]; foreach($_1493944326 as $_532736853 => $_1429920485){ $_817131463= $_1429920485; if($_1429920485 == ___1949743428(56)) $_817131463= true; if($_1429920485 == ___1949743428(57)) $_817131463= false; $_1353039630[$_532736853]= $_817131463;} return $_1353039630;} public function updateNeedProperties($_167704885, $_272708375){ foreach($_272708375 as $_443332781 => $_1429920485){ if($GLOBALS['____2111314429'][49]($_443332781)){ $_167704885[$_443332781]= true;} elseif($_443332781 == ___1949743428(58) || $_443332781 == ___1949743428(59)){ $_698040432= $this->getPropertyIdsFromTemplate($_1429920485); foreach($_698040432 as $_1483875850){ $_167704885[$_1483875850]= true;}} elseif( $_443332781 == ___1949743428(60) || $_443332781 == ___1949743428(61)){ $_167704885[$_1429920485]= true;}} if($_167704885) $this->_279382285= true; return $_167704885;} public function getUrl($_1531805407, $_272708375){ $_267731685= false; $_616207709= $this->isOffer($_1531805407); $_1005935886= $_616207709? $_272708375[___1949743428(62)]: $_272708375[___1949743428(63)]; if($_1005935886){ $_267731685= $_1531805407[___1949743428(64)][$_1005935886][___1949743428(65)] ?? false; $_267731685= htmlspecialcharsbx($_267731685);} return $_267731685;} public function getName($_1531805407, $_272708375, $_1388196255=[]){ $_616207709= $this->isOffer($_1531805407); $_1886915966= $_616207709? $_272708375[___1949743428(66)]: $_272708375[___1949743428(67)]; if(!$_1886915966) $_1886915966= $_1531805407[___1949743428(68)]; $_2048791064= $_1531805407[___1949743428(69)] ??[]; foreach($_1388196255 as $_1301084950 => $_1518480120) $_2048791064[$_1301084950]= $_1518480120; $_698825031= $this->addPropertiesToMarkValues([___1949743428(70) => $_1531805407[___1949743428(71)]], $_1886915966, $_2048791064); return $this->_1968596529->getStringByTemplate($_1886915966, $_698825031, $_1531805407[___1949743428(72)]);} protected function isOffer($_1531805407){ return($_1531805407['TYPE'] == 4);} protected function addPropertiesToMarkValues($_698825031, $_1886915966, $_2048791064){ if($GLOBALS['____2111314429'][50]($_1886915966, '{PROPERTY_') !== false){ $_1843941549= $this->getPropertyIdsFromTemplate($_1886915966); foreach($_1843941549 as $_1483875850){ $_23172862= $_2048791064[$_1483875850] ?? false; $_1429920485= $this->getPropertyValue($_23172862); if($GLOBALS['____2111314429'][51]($_1429920485)) $_1429920485= $GLOBALS['____2111314429'][52]($_1429920485); $_698825031[___1949743428(73).$_1483875850]= $_1429920485?: ___1949743428(74);}} return $_698825031;} protected function getPropertyValue($_23172862){ $_1429920485= $_23172862['VALUE'] ?? ''; $type= $_23172862[___1949743428(75)] ?? false; if($type == ___1949743428(76) && $GLOBALS['____2111314429'][53]($_1429920485)){ $_1483875850= $GLOBALS['____2111314429'][54]($_1429920485); $_1531805407= \CIBlockElement::GetList([],[___1949743428(77) => $_1483875850], false, false,[___1949743428(78), ___1949743428(79)])->Fetch(); $_1429920485= $_1531805407[___1949743428(80)] ?? ___1949743428(81);} return $_1429920485;} protected function getPropertyIdsFromTemplate($_1886915966){ $GLOBALS['____2111314429'][55]('/\{PROPERTY_(\d+)\}/', $_1886915966, $_304660950); $_1843941549= $_304660950[round(0+0.25+0.25+0.25+0.25)] ??[]; return $_1843941549;} public function getAdminObject($_1353039630=[]){ return $this->_678866187= new Admin($_1353039630);} public function getDetailSettings(){ return $this->_2060328424= new DetailSettings();} public function getPriceObject($_1353039630){ $_1348078125= $_1353039630['extendPrice']?: false; $_1701046726= $_1353039630[___1949743428(82)]?: false; if($_1701046726){ $this->_1288776043= new ExtendPriceByFormula($_1353039630);} elseif($_1348078125){ $this->_1288776043= new ExtendPrice($_1353039630);} else{ $this->_1288776043= new CommonPrice($_1353039630);} return $this->_1288776043;} public function getWarehouseObject($_1353039630){ $_10713952= $_1353039630['extendWarehouse']?: false; $_251462576= $_1353039630[___1949743428(83)]?: false; if($_10713952 &&!$_251462576){ $this->_763821617= new ExtendWarehouse($_1353039630);} elseif($_251462576){ $this->_763821617= new PropertiesBasedWarehouse($_1353039630);} else{ $this->_763821617= new CommonWarehouse($_1353039630);} if(!$this->_279382285){ $this->_279382285= $this->_763821617->checkNeedProperties();} return $this->_763821617;} public function getLimitationObject($_1353039630){ return $this->_1142979479= new Limit($_1353039630);} public function getFilterObject($_1353039630){ return $this->_1449452972= new Filter($_1353039630);} public function getTaxObject(array $_1353039630){ return $this->_1196213499= new Tax($_1353039630);} public function getShipmentObject(array $_1353039630){ return $this->_2045151772= new Shipment($_1353039630);} public function setParamToBasicAuthObject($_1353039630){ $this->_312752732= new BasicAuth($_1353039630);} public function checkNeedProperties(){ return $this->_279382285;} public function cleanKeysFromQuotes($_1898199702){ $_1052303774=[]; if($GLOBALS['____2111314429'][56]($_1898199702)){ foreach($_1898199702 as $_443332781 => $_1429920485){ $_443332781= $GLOBALS['____2111314429'][57]([___1949743428(84), ___1949743428(85)], ___1949743428(86), $_443332781); $_1052303774[$_443332781]= $_1429920485;}} return $_1052303774;}  public function appendFile($_1615318182, $_1172147888){ $_830974115= $GLOBALS['____2111314429'][58]($_1615318182, "rb"); $_531552590= $GLOBALS['____2111314429'][59]($_1172147888, ___1949743428(87)); $_684907603= false; if($_830974115 && $_531552590){ $_684907603= true; while(!$GLOBALS['____2111314429'][60]($_830974115)){ $_1302521634= $GLOBALS['____2111314429'][61]($_830974115, round(0+2048+2048)); if(!$_1302521634) continue; $_684907603= $GLOBALS['____2111314429'][62]($_531552590, $_1302521634); if($_684907603 === false) break;}} $GLOBALS['____2111314429'][63]($_531552590); $GLOBALS['____2111314429'][64]($_830974115); return $_684907603;} public function updateExportFile($_2137242433, $_665395421){ $_112292223= false; $_6536603= $_SERVER[___1949743428(88)].$_2137242433; $_416028617= $_SERVER[___1949743428(89)].$_665395421; $_1904552506= $this->_312752732->getAuthConditionCode($_416028617); $_112292223= $this->writeToFile( $_6536603, $_1904552506.___1949743428(90)); if($_112292223){ $this->writeToFile( $_6536603.___1949743428(91), $_416028617); $this->deleteOldExportsBeforeCurrent($_416028617);} return $_112292223;} protected function writeToFile($_792722248, $_798392509){ $_112292223= false; $_695667852=@$GLOBALS['____2111314429'][65]($_792722248, ___1949743428(92)); if($_695667852){ $GLOBALS['____2111314429'][66]($_695667852, $_798392509); $GLOBALS['____2111314429'][67]($_695667852); $_112292223= true;} return $_112292223;} protected function getFromFile($_792722248){ return $GLOBALS['____2111314429'][68]($_792722248);} protected function deleteOldExportsBeforeCurrent($_75875041){ $_1156627816= $this->getFilesListSamePath($_75875041); $_366956571= $this->getFilesByExample($_1156627816, $_75875041); $_322098682= $this->getExportTime($_75875041); $_1755882925= $this->getFilesBeforeTime($_366956571, $_322098682); foreach($_1755882925 as $_1603606461){ $this->deleteFile($_1603606461);}} protected function getFilesListSamePath($_75875041){ $_635393608= $GLOBALS['____2111314429'][69]($_75875041); $_1156627816= $GLOBALS['____2111314429'][70]($_635393608); $_1040071650=[]; foreach($_1156627816 as $_1603606461){ $_1040071650[]= $_635393608.___1949743428(93).$_1603606461;} return $_1040071650;} protected function getFilesByExample($_1156627816, $_391515966){ $_366956571=[]; $_1541688724= ___1949743428(94); list($_1174100723)= $GLOBALS['____2111314429'][71]($_1541688724, $_391515966); foreach($_1156627816 as $_1603606461){ if($GLOBALS['____2111314429'][72]($_1603606461, $_1541688724) === false) continue; list($_1784591980, $_517971225)= $GLOBALS['____2111314429'][73]($_1541688724, $_1603606461); if($_1784591980 == $_1174100723){ $_366956571[]= $_1603606461;}} return $_366956571;} protected function getExportTime($_75875041){ $_1541688724= '.php_import_'; if($GLOBALS['____2111314429'][74]($_75875041, $_1541688724) === false) return; list($_1784591980, $_517971225)= $GLOBALS['____2111314429'][75]($_1541688724, $_75875041); $_748319390= $GLOBALS['____2111314429'][76]([___1949743428(95), ___1949743428(96)], ___1949743428(97), $_517971225); return $GLOBALS['____2111314429'][77]($_748319390);} protected function getFilesBeforeTime($_1156627816, $_2059013070){ $_1755882925=[]; foreach($_1156627816 as $_1603606461){ $_1739318905= $this->getExportTime($_1603606461); if(!$_1739318905) continue; if($_1739318905< $_2059013070){ $_1755882925[]= $_1603606461;}} return $_1755882925;} protected function deleteFile($_1603606461){ if($_1603606461) $GLOBALS['____2111314429'][78]($_1603606461);} public function isLimitOfElementsExpired($_1502498251= false){ $this->_3434275++; $_1789511200=($this->isManualCall($_1502498251) && $this->isDemoMode()); return($_1789511200 && $this->_3434275> self::MAX_MANUAL_ELEMENTS);} protected function isManualCall($_1502498251= false){ if($this->_1334359899 !== null) return $this->_1334359899; if(!$_1502498251) $_1502498251= $GLOBALS['____2111314429'][79](DEBUG_BACKTRACE_IGNORE_ARGS); $_1334359899= false; foreach($_1502498251 as $_349476743){ $_1603606461= $_349476743[___1949743428(98)] ?? ___1949743428(99); if($GLOBALS['____2111314429'][80]($_1603606461, ___1949743428(100)) !== false){ $_1334359899= true; break;}} $this->_1334359899= $_1334359899; $_SESSION[self::MANUAL_CALL_FLAG]= ___1949743428(101); return $_1334359899;} public function isDemoMode(){ return(Loader::includeSharewareModule('wbs24.sbermmexport') == Loader::MODULE_DEMO);} public static function OnPrologHandler(){ $_932022075= new Sbermmexport(); if($_932022075->isFinishManualExport() && $_932022075->isDemoMode()){ \Bitrix\Main\Page\Asset::getInstance()->addJs(___1949743428(102));}} public function isFinishManualExport(){ $_1107975370= false; if( $GLOBALS['____2111314429'][81]($_SERVER[___1949743428(103)], ___1949743428(104)) !== false && isset($_SESSION[self::MANUAL_CALL_FLAG]) && $_SESSION[self::MANUAL_CALL_FLAG] == ___1949743428(105)){ $_1107975370= true; unset($_SESSION[self::MANUAL_CALL_FLAG]);} return $_1107975370;}} ?>
<? while(!$GLOBALS['____2111314429'][82](___1949743428(106)) || $GLOBALS['____2111314429'][83](wbs24_sbermmexport_OLDSITEEXPIREDATE) <=(1464/2-732) || wbs24_sbermmexport_OLDSITEEXPIREDATE != wbs24_sbermmexport_SITEEXPIREDATE)die(GetMessage(___1949743428(107)));?>