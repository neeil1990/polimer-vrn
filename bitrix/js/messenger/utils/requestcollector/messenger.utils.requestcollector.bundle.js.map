{"version":3,"file":"messenger.utils.requestcollector.bundle.js","sources":["messenger.utils.requestcollector.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Rest Request Collector\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nclass RequestCollector\n{\n\tconstructor()\n\t{\n\t\tthis.list = {};\n\t}\n\n\tregister(name, xhr)\n\t{\n\t\tthis.list[name] = xhr;\n\t\treturn true;\n\t}\n\n\tunregister(name, abort = false)\n\t{\n\t\tif (this.list[name])\n\t\t{\n\t\t\tif (abort)\n\t\t\t{\n\t\t\t\tthis.list[name].abort();\n\t\t\t}\n\t\t\tdelete this.list[name];\n\t\t}\n\t}\n\n\tget(name)\n\t{\n\t\treturn this.list[name]? this.list[name]: null;\n\t}\n\n\tabort(name)\n\t{\n\t\tif (this.list[name])\n\t\t{\n\t\t\tthis.list[name].abort();\n\t\t}\n\t\treturn true;\n\t}\n\n\tcleaner()\n\t{\n\t\tfor (let name in this.list)\n\t\t{\n\t\t\tif (this.list.hasOwnProperty(name))\n\t\t\t{\n\t\t\t\tthis.unregister(name, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nif (!window.BX)\n{\n\twindow.BX = {};\n}\nif (typeof window.BX.Messenger == 'undefined')\n{\n\twindow.BX.Messenger = {};\n}\nif (typeof window.BX.Messenger.RequestCollector == 'undefined')\n{\n\tBX.Messenger.RequestCollector = RequestCollector;\n}"],"names":["RequestCollector","list","name","xhr","abort","hasOwnProperty","unregister","window","BX","Messenger"],"mappings":";;;CAAA;;;;;;;;KASMA;;;CAEL,8BACA;CAAA;CACC,SAAKC,IAAL,GAAY,EAAZ;CACA;;;;8BAEQC,MAAMC,KACf;CACC,WAAKF,IAAL,CAAUC,IAAV,IAAkBC,GAAlB;CACA,aAAO,IAAP;CACA;;;gCAEUD,MACX;CAAA,UADiBE,KACjB,uEADyB,KACzB;;CACC,UAAI,KAAKH,IAAL,CAAUC,IAAV,CAAJ,EACA;CACC,YAAIE,KAAJ,EACA;CACC,eAAKH,IAAL,CAAUC,IAAV,EAAgBE,KAAhB;CACA;;CACD,eAAO,KAAKH,IAAL,CAAUC,IAAV,CAAP;CACA;CACD;;;yBAEGA,MACJ;CACC,aAAO,KAAKD,IAAL,CAAUC,IAAV,IAAiB,KAAKD,IAAL,CAAUC,IAAV,CAAjB,GAAkC,IAAzC;CACA;;;2BAEKA,MACN;CACC,UAAI,KAAKD,IAAL,CAAUC,IAAV,CAAJ,EACA;CACC,aAAKD,IAAL,CAAUC,IAAV,EAAgBE,KAAhB;CACA;;CACD,aAAO,IAAP;CACA;;;+BAGD;CACC,WAAK,IAAIF,IAAT,IAAiB,KAAKD,IAAtB,EACA;CACC,YAAI,KAAKA,IAAL,CAAUI,cAAV,CAAyBH,IAAzB,CAAJ,EACA;CACC,eAAKI,UAAL,CAAgBJ,IAAhB,EAAsB,IAAtB;CACA;CACD;CACD;;;;;CAGF,IAAI,CAACK,MAAM,CAACC,EAAZ,EACA;CACCD,EAAAA,MAAM,CAACC,EAAP,GAAY,EAAZ;CACA;;CACD,IAAI,OAAOD,MAAM,CAACC,EAAP,CAAUC,SAAjB,IAA8B,WAAlC,EACA;CACCF,EAAAA,MAAM,CAACC,EAAP,CAAUC,SAAV,GAAsB,EAAtB;CACA;;CACD,IAAI,OAAOF,MAAM,CAACC,EAAP,CAAUC,SAAV,CAAoBT,gBAA3B,IAA+C,WAAnD,EACA;CACCQ,EAAAA,EAAE,CAACC,SAAH,CAAaT,gBAAb,GAAgCA,gBAAhC;CACA;;;;"}