{"version":3,"file":"messenger.model.users.bundle.js","sources":["messenger.model.users.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Message model (Vuex module)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nclass ModelUsers\n{\n\tstatic getInstance()\n\t{\n\t\treturn new ModelUsers();\n\t}\n\n\tstatic getName()\n\t{\n\t\treturn 'messengerUsers';\n\t}\n\n\tgetStore(params = {})\n\t{\n\t\treturn {\n\t\t\tnamespaced : true,\n\n\t\t\tstate:\n\t\t\t{\n\t\t\t\thost: params.host || location.protocol+'//'+location.host,\n\t\t\t\tcollection: {},\n\t\t\t\tindex: {},\n\t\t\t},\n\n\t\t\tactions:\n\t\t\t{\n\t\t\t\tset(store, payload)\n\t\t\t\t{\n\t\t\t\t\tif (payload instanceof Array)\n\t\t\t\t\t{\n\t\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\tModelUsers.getUserBlank(),\n\t\t\t\t\t\t\t\tModelUsers.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet result = [];\n\t\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tModelUsers.getUserBlank(),\n\t\t\t\t\t\t\tModelUsers.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t));\n\t\t\t\t\t\tpayload = result;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('set', payload);\n\t\t\t\t},\n\t\t\t\tupdate(store, payload)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tuserId : payload.id,\n\t\t\t\t\t\tfields : ModelUsers.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tdelete(store, payload)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tmutations :\n\t\t\t{\n\t\t\t\tset(state, payload)\n\t\t\t\t{\n\t\t\t\t\tfor (let element of payload)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof state.collection[element.id] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Vue.set(state.collection, element.id, element);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.collection[element.id] = element;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tupdate(state, payload)\n\t\t\t\t{\n\t\t\t\t\tif (typeof state.collection[payload.id] === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Vue.set(state.collection, payload.id, ModelUsers.getUserBlank());\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tdelete(state, payload)\n\t\t\t\t{\n\t\t\t\t\tdelete state.collection[payload.id]\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tstatic convertToArray(object)\n\t{\n\t\tlet result = [];\n\t\tfor (let i in object)\n\t\t{\n\t\t\tif (object.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tresult.push(object[i]);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tstatic getUserBlank(params = {})\n\t{\n\t\tlet defaultName = params.defaultName || '';\n\n\t\treturn {\n\t\t\tid: 0,\n\t\t\tname: defaultName,\n\t\t\tfirstName: defaultName,\n\t\t\tlastName: \"\",\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tdepartments: [],\n\t\t\tabsent: false,\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\"\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tstatic validate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || location.protocol+'//'+location.host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = fields.first_name;\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = fields.last_name;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\n\t\t\tif (typeof fields.firstName !== \"undefined\" && !fields.firstName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.firstName = fields.firstName.toString();\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.lastName = fields.lastName.toString();\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tif (!fields.avatar || fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.avatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.avatar = options.host+fields.avatar;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tif (fields.idle instanceof Date)\n\t\t\t{\n\t\t\t\tresult.idle = fields.idle;\n\t\t\t}\n\t\t\telse if (typeof fields.idle === \"string\")\n\t\t\t{\n\t\t\t\tresult.idle = new Date(fields.idle);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.idle = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tif (fields.lastActivityDate instanceof Date)\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = fields.lastActivityDate;\n\t\t\t}\n\t\t\telse if (typeof fields.lastActivityDate === \"string\")\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = new Date(fields.lastActivityDate);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tif (fields.mobileLastDate instanceof Date)\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = fields.mobileLastDate;\n\t\t\t}\n\t\t\telse if (typeof fields.mobileLastDate === \"string\")\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = new Date(fields.mobileLastDate);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tif (fields.absent instanceof Date)\n\t\t\t{\n\t\t\t\tresult.absent = fields.absent;\n\t\t\t}\n\t\t\telse if (typeof fields.absent === \"string\")\n\t\t\t{\n\t\t\t\tresult.absent = new Date(fields.absent);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.absent = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && !fields.phones)\n\t\t{\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nif (!window.BX)\n{\n\twindow.BX = {};\n}\nif (typeof window.BX.Messenger == 'undefined')\n{\n\twindow.BX.Messenger = {};\n}\nif (typeof window.BX.Messenger.Model == 'undefined')\n{\n\twindow.BX.Messenger.Model = {};\n}\nif (typeof window.BX.Messenger.Model.Users == 'undefined')\n{\n\tBX.Messenger.Model.Users = ModelUsers;\n}"],"names":["ModelUsers","params","namespaced","state","host","location","protocol","collection","index","actions","set","store","payload","Array","map","user","Object","assign","getUserBlank","validate","init","result","push","commit","update","id","userId","fields","delete","mutations","element","BX","Vue","object","i","hasOwnProperty","defaultName","name","firstName","lastName","workPosition","color","avatar","gender","birthday","extranet","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","departments","absent","phones","workPhone","personalMobile","personalPhone","options","parseInt","first_name","last_name","toString","elementsOfName","split","length","join","trim","work_position","startsWith","external_auth_id","Date","last_activity_date","mobile_last_date","forEach","departmentId","work_phone","personal_mobile","personal_phone","window","Messenger","Model","Users"],"mappings":"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"}